<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Moviecruise</title>
<link rel="stylesheet" href="css/style.css">
<script src="js/jquery-3.5.1.min.js"></script>

</head>
<body>

    <div id="header">
      <a href="./index.html">
      <img src="./img/titlelogo.png" alt="logo" width="11%" id="logo">
      </a>
      <div id="navigation-area">
        <ul id="navigation">
          <li class="navigation-double-margin">
            <a href="#movie">
              <span>æœ€æ–°æ³¨ç›®ä½œå“</span>
            </a>
          </li>
          <li class="navigation-double-margin">
            <a href="#news">
              <span>æ˜ ç”»ãƒ‹ãƒ¥ãƒ¼ã‚¹</span>
            </a>
          </li>
          <li class="navigation-double-margin">
            <a href="#theaters">
              <span>æ˜ ç”»é¤¨æƒ…å ±</span>
            </a>
          </li>
        </ul>
      </div>
   </div>


<a name="movie">
<div class="title-container">
</a>
  <p class="title-text">æœ€æ–°æ³¨ç›®ä½œå“</p>
</div>
   <header>
    <form id="form">
      <input type="text" placeholder="æ˜ ç”»ã‚’ã‚¿ã‚¤ãƒˆãƒ«ã§æ¤œç´¢" size="50" id="search" class="search">
    </form>
  </header>
<main id="main">
  <div class="movie">
    <img src="" alt="">
    <div class="movie-info">
      <h3>Movie Title</h3>
      <span class="green">9.8</span>
    </div>
    <div class="overview">
      <h3>ã‚ã‚‰ã™ã˜</h3>
      ã‚ã‚‰ã™ã˜
    </div>
  </div>
</main>

<a name="news">
  <div id="news-container">
</a>
  <div class="title-container">
    <p class="title-text">æœ€æ–°æ˜ ç”»ãƒ‹ãƒ¥ãƒ¼ã‚¹</p>
  </div>
  <div id="article-container">
    <div id="wrap">
      <!-- <div class="txt-show"> -->
        <div id="article-area">
          <div id="article1"><a href="https://natalie.mu/eiga/news/460986">
            <div class="hover1">
              <img src="./img/newspic1.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                å…¨ç±³æ‰¹è©•å®¶å”ä¼šè³ã€Œãƒ‰ãƒ©ã‚¤ãƒ–ãƒ»ãƒã‚¤ãƒ»ã‚«ãƒ¼ã€ãŒä½œå“è³ã«ã€è¥¿å³¶ç§€ä¿Šã®ä¸»æ¼”ç”·å„ªè³ã¯ã‚¢ã‚¸ã‚¢äººåˆ
              </p>
              <p class="date">2022/1/9</p>
            </div></a>
          </div>
          <div id="article2"><a href="https://natalie.mu/eiga/news/460904">
            <div class="hover1">
              <img src="./img/newspic2.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                å°è°·å¿ å…¸ã®é•·ç·¨åŠ‡æ˜ ç”»ã€ŒãŸã¾ã‚‰ã‚“å‚ã€3æœˆã«å…¬é–‹ã€æ¸¡é‚Šé››å­ã‚„å¤èˆ˜å¯›æ²»ã‚‰å‡ºæ¼”
              </p>
              <p class="date">2022/1/9</p>
            </div></a>
          </div>
          <div id="article3">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460919">
              <img src="./img/newspic3.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                ã‚»ãƒ¼ãƒ©ãƒ¼æœã®é•·æ¾¤ã¾ã•ã¿ï¼ã€Œã‚³ãƒ³ãƒ•ã‚£ãƒ‡ãƒ³ã‚¹ãƒãƒ³JPã€ç‰¹ç•ªãŒ5å¤œé€£ç¶šæ”¾é€
              </p>
              <p class="date">2022/1/8</p>
            </div></a>
          </div>
          <div id="article4">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460892">
              <img src="./img/newspic4.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                ã‚·ãƒ‰ãƒ‹ãƒ¼ãƒ»ãƒãƒ¯ãƒã‚¨ãŒ94æ­³ã§æ­»å»ã€é»’äººã¨ã—ã¦åˆã‚ã¦ã‚¢ã‚«ãƒ‡ãƒŸãƒ¼è³ä¸»æ¼”ç”·å„ªè³ã‚’å—è³
              </p>
              <p class="date">2022/1/8</p>
            </div></a>
          </div>
        </div>
      <!-- </div> -->
      <p id="space"></p>
      <!-- <div class="txt-hide"> -->
        <div id="article-area2">
          <div id="article5">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460644">
              <img src="./img/newspic5.webp" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                ãƒ‰ãƒ‹ãƒ¼ãƒ»ã‚¤ã‚§ãƒ³Ã—ãƒ‹ã‚³ãƒ©ã‚¹ãƒ»ãƒ„ã‚§ãƒ¼Wä¸»æ¼”ä½œã®æ‹¡å¤§å…¬é–‹ãŒæ±ºå®šã€ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼æ˜ åƒåˆ°ç€
              </p>
              <p class="date">2022/1/7</p>
            </div></a>
          </div>
          <div id="article6">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460653">
              <img src="./img/newspic6.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                ã€Œãƒ‰ã‚¯ã‚¿ãƒ¼ãƒ»ã‚¹ãƒˆãƒ¬ãƒ³ã‚¸MoMã€å…¨ç±³ã‚ˆã‚Š2æ—¥æ—©ã„5æœˆ4æ—¥ã«å…¬é–‹æ±ºå®š
              </p>
              <p class="date">2022/1/7</p>
            </div></a>
          </div>
          <div id="article7">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460661"></a>
              <img src="./img/newspic7.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                çš†ãŒç§ã‚’ç‹™ã£ã¦ã‚‹â€¦ã‚±ãƒã‚¹ãƒ»ãƒ–ãƒ©ãƒŠãƒ¼ä¸»æ¼”ã€ŒãƒŠã‚¤ãƒ«æ®ºäººäº‹ä»¶ã€æœ¬äºˆå‘Š
              </p>
              <p class="date">2022/1/7</p>
            </div></a>
          </div>
          <div id="article8">
            <div class="hover1"><a href="https://natalie.mu/eiga/news/460686">
              <img src="./img/newspic8.png" alt="ãƒ‹ãƒ¥ãƒ¼ã‚¹ç”»åƒ" width="300px" height="200px">
              <p class="article-info-line">
                ãƒ–ãƒ«ãƒ¼ã‚¹ãƒ»ã‚¦ã‚§ã‚¤ãƒ³ãŒè¬è§£ãã«ç¿»å¼„ã•ã‚Œã‚‹ã€ŒTHE BATMANã€æ–°æ˜ åƒ
              </p>
              <p class="date">2022/1/7</p>
            </div></a>
          </div>
        </div>
      <!-- </div> -->
      <!-- <button class="more"></button> -->
      <a href="https://natalie.mu/eiga/news"><h3 id="morenews">>>ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’ã‚‚ã£ã¨è¦‹ã‚‹</h3></a>
    </div>
  </div>
</div>

<a name="theaters">
  <div id="map-container">
</a>
  <div id="map-line-container">
    <p id="map-text">å‘¨è¾ºã®æ˜ ç”»é¤¨æƒ…å ±</p>
  </div>
  <div id="myMap" style="position:relative;width:100%;height:450px;"></div>
</div>
    
</body>

<footer>
  <div id="footer">
  <p>copyright kazoooooma.inc No Rights ReserverdğŸ˜</p>
  </div>
</footer>

<!-- jQuery&GoogleMapsAPI -->
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- /jQuery&GoogleMapsAPI -->

<!-- javascript -->
<script src="https://www.bing.com/api/maps/mapcontrol?callback=GetMap&key=" async defer></script>
<script>

// TMDB
const API_KEY = "api_key=";
const BASE_URL = "https://api.themoviedb.org/3";
const API_URL = BASE_URL + "/discover/movie?sort_by=popularity.desc&" + API_KEY + "&language=en-EN";
const IMG_URL = "https://image.tmdb.org/t/p/w500/";
const SEARCH_URL = BASE_URL + "/search/movie?" + API_KEY + "&language=en-EN";

const main = document.getElementById("main");
const form = document.getElementById("form");
const search = document.getElementById("search");

getmovies(API_URL);

function getmovies(url){
  fetch(url).then(res => res.json()).then(data => {
    console.log(data.results);
    showmovies(data.results);
  })
}

function showmovies(data){
  main.innerHTML = "";

  data.forEach(movie => {
    const {title, poster_path, vote_average, overview, id} = movie;
    const movieEl = document.createElement("div");
    movieEl.classList.add("movie");
    movieEl.innerHTML = `
    <a href="./${title}.html">
    <img src="${IMG_URL + poster_path}" alt="${title}">
    <div class="movie-info">
      <h3>${title}</h3>
      <span class=${getcolor(vote_average)}>${vote_average}</span>
    </div>
    <div class="overview">
      <h3>ã‚¹ãƒˆãƒ¼ãƒªãƒ¼</h3>
      ${overview}
    </div>
    </a>
    `  
    main.appendChild(movieEl);
  });
}

function getcolor(vote){
  if(vote >= 8){
    return "green"
  }else if(vote >= 5){
    return "orange"
  }else{
    return "red"
  }
  }

  form.addEventListener("submit" , (e) => {
    e.preventDefault();
    const searchTerm = search.value;
    if(searchTerm){
      getmovies(SEARCH_URL + "&query=" + searchTerm)
    }else{
      getmovies(API_URL)
    }
  })

  $(function(){
  $(".more").on("click", function() {
    $(this).toggleClass("on-click");
    $(".txt-hide").slideToggle(1000);
  });
}); 

let map;
function GetMap() {
        let map = new Microsoft.Maps.Map('#myMap', {
            center: new Microsoft.Maps.Location(35.6689603, 139.7030109),
            mapTypeId: Microsoft.Maps.MapTypeId.grayscale,
            zoom: 13, //Location center position
        });

        //Get MAP Infomation
        let center = map.getCenter();
      

        //Create custom Pushpin

        let tohoshinjuku = new Microsoft.Maps.Pushpin({latitude:35.69553727991968, longitude:139.70204377051388},{
          title: "TOHOã‚·ãƒãƒã‚ºæ–°å®¿",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let tohohibiya = new Microsoft.Maps.Pushpin({latitude:35.67401477414013, longitude:139.75903773679065},{
          title: "TOHOã‚·ãƒãƒã‚ºæ—¥æ¯”è°·",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let tohonihonbashi = new Microsoft.Maps.Pushpin({latitude:35.68705703459567, longitude:139.77484196877833},{
          title: "TOHOã‚·ãƒãƒã‚ºæ—¥æœ¬æ©‹",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let tohoshibuya = new Microsoft.Maps.Pushpin({latitude:35.65927499228199, longitude:139.6988723822706},{
          title: "TOHOã‚·ãƒãƒã‚ºæ¸‹è°·",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let tohoroppongi = new Microsoft.Maps.Pushpin({latitude:35.65992923924165, longitude:139.72946513994182},{
          title: "TOHOã‚·ãƒãƒã‚ºå…­æœ¬æœ¨",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let wald9 = new Microsoft.Maps.Pushpin({latitude:35.6903507832549, longitude:139.70588436877838},{
          title: "æ–°å®¿ãƒãƒ«ãƒˆ9",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let piccadillymarunouchi = new Microsoft.Maps.Pushpin({latitude:35.675792376508745, longitude:139.76237110091677},{
          title: "ä¸¸ã®å†…ãƒ”ã‚«ãƒ‡ãƒªãƒ¼",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });
        let piccadillyshinjuku = new Microsoft.Maps.Pushpin({latitude:35.692957621521, longitude:139.70369497644978},{
          title: "æ–°å®¿ãƒ”ã‚«ãƒ‡ãƒªãƒ¼",
          text:"",
          color: 'blue',            //Color
          enableClickedStyle:true, //Click
          enableHoverStyle:true,   //MouseOver
          visible:true             //show/hide
        });


        //Add the pushpin to the map
        map.entities.push(tohoshinjuku);
        map.entities.push(tohohibiya);
        map.entities.push(tohonihonbashi);
        map.entities.push(tohoshibuya);
        map.entities.push(tohoroppongi);
        map.entities.push(wald9);
        map.entities.push(piccadillymarunouchi);
        map.entities.push(piccadillyshinjuku);

        Microsoft.Maps.Events.addHandler(tohoshinjuku, "click", function(){location.href = "https://hlo.tohotheater.jp/net/schedule/076/TNPI2000J01.do"});
        Microsoft.Maps.Events.addHandler(tohohibiya, "click", function(){location.href = "https://hlo.tohotheater.jp/net/schedule/081/TNPI2000J01.do"});
        Microsoft.Maps.Events.addHandler(tohonihonbashi, "click", function(){location.href = "https://hlo.tohotheater.jp/net/schedule/073/TNPI2000J01.do"});
        Microsoft.Maps.Events.addHandler(tohoshibuya, "click", function(){location.href = "https://hlo.tohotheater.jp/net/schedule/043/TNPI2000J01.do"});
        Microsoft.Maps.Events.addHandler(tohoroppongi, "click", function(){location.href = "https://hlo.tohotheater.jp/net/schedule/009/TNPI2000J01.do"});
        Microsoft.Maps.Events.addHandler(wald9, "click", function(){location.href = "https://tjoy.jp/shinjuku_wald9"});
        Microsoft.Maps.Events.addHandler(piccadillymarunouchi, "click", function(){location.href = "https://www.smt-cinema.com/site/marunouchi/index.html"});
        Microsoft.Maps.Events.addHandler(piccadillyshinjuku, "click", function(){location.href = "https://www.smt-cinema.com/site/shinjuku/index.html"});
    }

//1ï¼ä½ç½®æƒ…å ±ã®å–å¾—ã«æˆåŠŸã—ãŸæ™‚ã®å‡¦ç†
function mapsInit(position) {
  console.log(position)
    //lat=ç·¯åº¦ã€lon=çµŒåº¦ ã‚’å–å¾—
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;
  // $("#view").text("ç·¯åº¦" + lat + "çµŒåº¦" + lon) 
  // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§æ›¸ããªã‚‰
  // $("#view").text(`ç·¯åº¦${lat}çµŒåº¦${lon}`);
};

//2ï¼ ä½ç½®æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ãŸå ´åˆã®å‡¦ç†
function mapsError(error) {
  let e = "";
  if (error.code == 1) { //1ï¼ä½ç½®æƒ…å ±å–å¾—ãŒè¨±å¯ã•ã‚Œã¦ãªã„ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šï¼‰
    e = "ä½ç½®æƒ…å ±ãŒè¨±å¯ã•ã‚Œã¦ã¾ã›ã‚“";
  }
  if (error.code == 2) { //2ï¼ç¾åœ¨åœ°ã‚’ç‰¹å®šã§ããªã„
    e = "ç¾åœ¨ä½ç½®ã‚’ç‰¹å®šã§ãã¾ã›ã‚“";
  }
  if (error.code == 3) { //3ï¼ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹å‰ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ãªã£ãŸå ´åˆ
    e = "ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹å‰ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ãªã‚Šã¾ã—ãŸ";
  }
  alert("ã‚¨ãƒ©ãƒ¼ï¼š" + e);
};

//3.ä½ç½®æƒ…å ±å–å¾—ã‚ªãƒ—ã‚·ãƒ§ãƒ³
var set ={
  enableHighAccuracy: true, //ã‚ˆã‚Šé«˜ç²¾åº¦ãªä½ç½®ã‚’æ±‚ã‚ã‚‹
  maximumAge: 20000,        //æœ€å¾Œã®ç¾åœ¨åœ°æƒ…å ±å–å¾—ãŒ20ç§’ä»¥å†…ã§ã‚ã‚Œã°ãã®æƒ…å ±ã‚’å†åˆ©ç”¨ã™ã‚‹è¨­å®š
  timeout: 10000            //10ç§’ä»¥å†…ã«ç¾åœ¨åœ°æƒ…å ±ã‚’å–å¾—ã§ããªã‘ã‚Œã°ã€å‡¦ç†ã‚’çµ‚äº†
};

//Main:ä½ç½®æƒ…å ±ã‚’å–å¾—ã™ã‚‹å‡¦ç† //getCurrentPosition :or: watchPosition
navigator.geolocation.getCurrentPosition(mapsInit, mapsError, set);

</script>
</body>

</html>